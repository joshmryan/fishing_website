<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Doctor Dry Fly - Trans-Catalina Trail</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9FBWPJ5ZFQ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9FBWPJ5ZFQ', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Doctor Dry Fly</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./fishing_landing.html" rel="" target="">
 <span class="menu-text">Fly Fishing in the West</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./adventures_landing.html" rel="" target="">
 <span class="menu-text">Other Adventures</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./fishing_history.html" rel="" target="">
 <span class="menu-text">About and Contact</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#logistics" id="toc-logistics" class="nav-link active" data-scroll-target="#logistics">Logistics</a></li>
  <li><a href="#day-1-two-harbors-to-parsons-landing" id="toc-day-1-two-harbors-to-parsons-landing" class="nav-link" data-scroll-target="#day-1-two-harbors-to-parsons-landing">Day 1: Two Harbors to Parson’s Landing</a></li>
  <li><a href="#day-2-parsons-landing-to-little-harbor" id="toc-day-2-parsons-landing-to-little-harbor" class="nav-link" data-scroll-target="#day-2-parsons-landing-to-little-harbor">Day 2: Parson’s Landing to Little Harbor</a></li>
  <li><a href="#day-3-little-harbor-to-avalon" id="toc-day-3-little-harbor-to-avalon" class="nav-link" data-scroll-target="#day-3-little-harbor-to-avalon">Day 3: Little Harbor to Avalon</a></li>
  <li><a href="#other-information" id="toc-other-information" class="nav-link" data-scroll-target="#other-information">Other Information</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Trans-Catalina Trail</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>After visiting family in Southern California over Christmas, and feeling antsy to do something outside after suffering through half of a Northern Utah winter, I made plans to hike the Trans-Catalina Trail from December 28th through 31st. The hike exceeded my expectations, both in terms of scenery and difficulty. It was hard, probably the most challenging of my recent hikes. I also did it in only two nights; most hikers will take at least three and maybe four. Unfortunately, the two nights was a necessity because I could not secure reservations at BlackJack Campground (more on that below). My full hike with mileage can be found on CalTopo <a href="https://caltopo.com/m/GB1A3">here</a>.</p>
<section id="logistics" class="level3">
<h3 class="anchored" data-anchor-id="logistics">Logistics</h3>
<p>The hike presents some semi-challenging logistical issues, mostly because of the boat ride. There are only two places to start the hike on Catalina: Avalon and Two Harbors. Avalon is the southern terminus of the hike, while Two Harbors is on the northern part of the island, though not at the most northern point of our hike. The Catalina Express boat service, which I believe is the only one that serves Two Harbors (at least in the Winter), runs from Long Beach, to Avalon, to Two Harbors, then back to Long Beach. And, this service is infrequent as most boats just run back-and-forth from Avalon, which is a much bigger town and the main tourist destination on the island (there is almost nothing in Two Harbors.) For this reason, I think most hikers begin at Avalon and hike to Two Harbors, then take the boat back to Long Beach.</p>
<p>I did not want to do this because I planned on spending two days, including New Years Eve, in Avalon, at the end of the hike. As an aside, Avalon is kind of a weird place. As a native of Southern California, I have been going there since I was a child, and it has not changed at all–at least as far as I can tell–in the last thirty years. I have always liked Catalina and I have a lot of fond memories of Avalon, but it is full of the same bars, restaurants, tourist shops, and golf carts that I remember from 1992. It’s refreshingly resistant to gentrification, upscale restaurants or hotels, but as an adult I would also appreciate the ability to have a nice meal in town. I’m still waiting for that to happen. But, if for no other reason than nostalgia, I was excited to spend New Years Eve in Avalon.</p>
<p>There are advantages and problems with hiking both north to south and south to north. The main problem with our plan (north to south with two nights in an Avalon hotel) is that we had to carry town clothes in our backpack. Ultralight people cover your eyes, but this meant I backpacked with jeans, clean shirts, and casual shoes so I had something to wear in Avalon when we finished. This can be avoided two ways. First, spend a night in Avalon and store one’s stuff at the hotel or whatever. But, this is very inefficient and time consuming. I think there is a second way, however. As mentioned, the Catalina Express stops in Avalon before it continues to Two Harbors. There are lockers at the dock in Avalon, and I think one could disembark the boat, store clothes and shoes in the lockers, then re-board the boat. You are definitely not supposed to do this, but I suspect if you asked the crew if you could leave the boat and return, they would let you. If not, I don’t see why you couldn’t just buy a ticket to Two Harbors at the ticket window on the Avalon dock, and re-board. Time is not an issue as the boat sits at the Avalon dock for 15 or 20 minutes, at least. I think in the worst case scenario, you could disembark, get a locker, buy a ticket to Two Harbors, and be back on the boat in about five minutes as everything (i.e., the lockers, ticket window) are within about 50 feet of the boat. I did not do this, but I think it would work (caveat emptor). Or, you could just carry your clothes as I did.</p>
<p>The main disadvantage to hiking south to north is that both the prevailing wind and the sun are directly in your face all day, at least in the winter, though I am almost certain this issue would be worse in the summer (do NOT do this hike in the summer, see below). A smaller issue is that because there is very little infrastructure in Two Harbors, it’s almost certain you’d be catching a boat back to Long Beach directly from your hike, meaning you have to stay on schedule, then boat back to Long Beach and drive back to wherever you are spending the night, which in Southern California probably means sitting in traffic after a day of hiking and a boat ride. For these reasons I think it’s just nicer to end in Avalon, get a hotel, take a shower, have a (mediocre) dinner at a restaurant, and catch the boat the next day.</p>
<p>I am very prone to sea sickness–it’s such a thing for me that it does change my behavior and leads me to avoid boats unless absolutely necessary. I was extremely nervous the night before because large swells were forecast but it really wasn’t that bad, which is normal for the crossing between Long Beach and Avalon. I took Dramamine and sat outside on the boat, but I didn’t have much to worry about. I didn’t notice any effects on my hiking after taking Dramaine either, though once we made camp I fell asleep pretty early. I have been on trips to Catalina in which the boat turned into a vomit comet, but that is exceedingly rare. Once you make it to Avalon, my impression is the ride to Two Harbors is easier because the boat stays relatively close to shore and it seems shorter, at least to me. Sitting outside on the boat also gave me a great view of the numerous dolphins swimming around the boat.</p>
</section>
<section id="day-1-two-harbors-to-parsons-landing" class="level3">
<h3 class="anchored" data-anchor-id="day-1-two-harbors-to-parsons-landing">Day 1: Two Harbors to Parson’s Landing</h3>
<p>We took the 8:45 am boat from Long Beach to Avalon, then on to Two Harbors, landing at about 10 am. The general store in Two Harbors sells made to order pizzas for the exorbitant price of about $20, but the pizza is actually good and you can eat it for both lunch and dinner (or a trail snack). The pizza feels somewhat obligatory before or after the hike.</p>
<p><img src="other_pics/trail_parsons.JPG" class="img-fluid"> The trail above Two Harbors on the way to Parson’s Landing.</p>
<p>There are two routes to Parson’s Landing. The easier, but longer of the two follows the coast and winds its way in and out of the drainages just above the ocean. It is entirely flat and CalTopo measures it at almost exactly 7.5 miles. We chose the more difficult of the two routes, which leads from the town of Two Harbors, crosses the isthmus to the other harbor, then steeply ascends to the ridge. I am not kidding about the steepness. This is more or less a road or double-track, which constitutes the vast majority of hiking on Catalina, and it gains nearly 1,500 feet of elevation in about 2.25 miles. The trail continues to gain elevation after that as well, but it isn’t quite as steep. At this point, the trail follows the spine of the mountains, with excellent views on both side, but especially to the east side of the island.</p>
<p><img src="other_pics/parsons_landing.JPG" class="img-fluid"> Between the waves at Parson’s Landing. Note the picnic bench near the water and the storage box toppled by the waves.</p>
<p>Nearly above Parson’s Landing, the trail drops very steeply into the campground, which is right on the beach. In fact, the day we were there, we had to camp on a small bluff above the beach because a high tide combined with massive waves meant that the actual campground was nearly underwater. It was a spectacular sight.</p>
<p>There is bottled water at the campground. The rules are a little bit fuzzy on whether the bottles are for public consumption, but we used them as did everyone else as there was plenty to go around. On the mainland, reservations are required months in advance for pretty crummy state beach campgrounds that are crowded and noisy. Here, it was easy for us to get a campsite on the beach, in a secluded cove, for the week between Christmas and New Years. I feel comfortable saying Parson’s Landing is the best beach camping in Southern California. Total mileage from Two Harbors is slightly less than seven, and after leaving Two Harbors about 11 am, we were at Parson’s about 4:30 pm.</p>
</section>
<section id="day-2-parsons-landing-to-little-harbor" class="level3">
<h3 class="anchored" data-anchor-id="day-2-parsons-landing-to-little-harbor">Day 2: Parson’s Landing to Little Harbor</h3>
<p>We took the coast route back to Two Harbors which is flat and offers nice views of the ocean and beach. We saw a lot of dolphins in the surf, foxes on the road, and a few cars as this is the main road that runs between the various camps along the west side of the island. From Two Harbors the trail again climbs steeply to the South, then to the Southeast. The scenery along this stretch of the trail is spectacular, especially on a clear day, which we were lucky to have. I wouldn’t characterize sections of this trail as being exposed necessarily, but the dropoff on both sides is big and cliffy. I don’t particularly like exposure, and it was a little tight, but nothing to get too worked up about.</p>
<p><img src="other_pics/trail_little.JPG" class="img-fluid"> The trail between Two Harbors and Little Harbor.</p>
<p>This is a long day, nearly 14 miles. Because you backtrack to Two Harbors, I think some people stay the night there, but it’s only halfway and we wanted to hike farther than that. The problem is, after Two Harbors, it’s a big climb, then a little up and down, then way down to the campground. Again, the campground is right on the ocean, in a little harbor (hence the name), surrounded by palm trees. No complaints here about the scenery, though this is a much bigger campground than Parson’s Landing. Some of the sites are set a ways back from the beach and offer more privacy, but are a longer walk from the ocean.</p>
<p><img src="other_pics/above_little.JPG" class="img-fluid"> The ridge is a little narrow, but the views are great.</p>
</section>
<section id="day-3-little-harbor-to-avalon" class="level3">
<h3 class="anchored" data-anchor-id="day-3-little-harbor-to-avalon">Day 3: Little Harbor to Avalon</h3>
<p>It was late December and this is the rainy season in Southern California. I knew a storm was coming in, but the forecast wasn’t too bad and I’m certainly used to camping and hiking in the rain. I was surprised how hard it rained on our second night and how windy it was. The good news is that in typical Southern California fashion, the rain blew out as quickly as it blew in. We awoke to scattered clouds, and a few passing showers, but the weather improved throughout the day. I overheard the campers in the site next to us sharing war stories of how windy it was during the night and how hard it was raining. All I could think was bruh, you guys do not know what it means to camp in the wind and rain (a year later and I was still emotionally scared from my <a href="torres_del_paine_hike_details">O</a> <a href="./torres_del_paine_hike_details.html">hike</a>).</p>
<p>The hike out of Little Harbor was muddy at first, which made things tough. The trail climbs (steeply, obviously) to a mesa, crosses the mesa, then climbs more. There were a lot of buffalo in this area, and at one point we had to drop into a gully to get around a herd that was standing directly on the trail on top of a ridge. The scenery is fine, and gets better once you reach the ridge and begin heading to the airport. For much of the hike immediately before and after the airport, there are nice views of the highest mountains on the island, but it feels much more like an inland hike in Southern California. There are fewer sweeping views of the ocean but the trail goes through interesting oak and brush habitat, especially after the airport.</p>
<p><img src="other_pics/buffalo.JPG" class="img-fluid"> Skylined buffalo blocking the trail.</p>
<p>The trail is really up and down in this section, and I was definitely feeling it. We had planned to go all the to Avalon, though the vast majority of people stop at BlackJack Campground, about 8.25 miles from Little Harbor. It is probably a good idea to stop here; the campground is fine, it’s at the top of a little canyon, there is some shade, but there are no views. Our problem was that we couldn’t get a reservation here. I think a lot of people hike up from Avalon and spend the night here. Why they do this, I have no idea because there aren’t any views to speak of, and the hike from the campground to Avalon is probably the least scenic part of the trail. If you want to do a small section, take the boat to Two Harbors and hike to Parsons Landing or Two Harbors.</p>
<p><img src="other_pics/looking_west.JPG" class="img-fluid"> After the storm, looking west on the trail toward Long Beach. This is between Little Harbor and the airport</p>
<p>We had no choice but to continue and after BlackJack the trail descends through the canyon. It’s all up and down again from here to the road into Avalon. It’s a bit of a slog as the trail is mostly inland, it’s close to the road and there are tour jeeps and other maintenance vehicles that go by. From about mile ten on, the trail basically parallels the road. Perhaps a good reason to hike south to north is that you get this boring part out of the way first.</p>
<p>The trail converges with the road on the ridge directly south of Avalon. The official route actually continues on the road, creating a semi-circle on the ridge around Avalon, dropping into town nearly due east of it. That would have added another two or three miles to our hike and we were exhausted and running out of light, so we just walked down Stage Road. The total mileage from Little Harbor is about 17, though the local sheriff gave us a ride the last two miles or so down Stage Road.</p>
</section>
<section id="other-information" class="level3">
<h3 class="anchored" data-anchor-id="other-information">Other Information</h3>
<p>I mean this sincerely, I would not do this hike in the Summer. Even in the middle of Winter, the highs were in the mid 60s and that was plenty warm. It’s a strenuous hike, there isn’t much water on the trail, and there is barely a lick of shade along the entire trail (see the pictures). If it is in the mid 70s, I think you’d be cooking all day long. In fact, the sheriff told us that they rescue people from the trail all Summer.</p>
<p>We did not have a trail map, and one is probably not necessary, though there are enough crisscrossing roads and trails that it might be useful. The trail is mostly well-signed, and the worst case scenario is that you take a slightly different road or path somewhere. Otherwise, just pay attention and be aware of what direction you’re supposed to go. A few times we started down a side trail or road then realized we weren’t going the right direction.</p>
<p>One thing that also surprised us, especially on the last day, was the shortness of the days. We are not used to hiking in the Winter, but we nearly ran out of light on the 17 mile day.</p>
<p>I saw Rickey Henderson at a breakfast restaurant in Avalon on December 31st.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>