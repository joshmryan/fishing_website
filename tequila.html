<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="keywords" content="Tasting in Tequila, Tequila Jalisco tours, Tequila tasting experience, best tequila tours, Tequila distilleries, Tequila Jalisco attractions, tequila production process, where to taste tequila in Jalisco, exploring Tequila Mexico, tequila production process, authentic tequila tasting">

<title>Doctor Dry Fly - Visiting and Tasting in Tequila, Jalisco, Mexico</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9FBWPJ5ZFQ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9FBWPJ5ZFQ', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Doctor Dry Fly</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./fishing_landing.html" rel="" target="">
 <span class="menu-text">Fly Fishing in the West</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./adventures_landing.html" rel="" target="">
 <span class="menu-text">Other Adventures</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./fishing_history.html" rel="" target="">
 <span class="menu-text">About and Contact</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#uncover-the-secrets-of-tequila-tasting-in-tequila-jalisco" id="toc-uncover-the-secrets-of-tequila-tasting-in-tequila-jalisco" class="nav-link active" data-scroll-target="#uncover-the-secrets-of-tequila-tasting-in-tequila-jalisco">Uncover the Secrets of Tequila: Tasting in Tequila, Jalisco</a>
  <ul class="collapse">
  <li><a href="#travel-to-guadalajara" id="toc-travel-to-guadalajara" class="nav-link" data-scroll-target="#travel-to-guadalajara">Travel to Guadalajara</a></li>
  <li><a href="#from-guadalajara-to-tequila" id="toc-from-guadalajara-to-tequila" class="nav-link" data-scroll-target="#from-guadalajara-to-tequila">From Guadalajara to Tequila</a></li>
  <li><a href="#activities-and-scenery-in-tequila" id="toc-activities-and-scenery-in-tequila" class="nav-link" data-scroll-target="#activities-and-scenery-in-tequila">Activities and Scenery In Tequila</a></li>
  <li><a href="#visiting-distilleries-outside-town" id="toc-visiting-distilleries-outside-town" class="nav-link" data-scroll-target="#visiting-distilleries-outside-town">Visiting Distilleries Outside Town</a></li>
  <li><a href="#logistics-of-visiting-tequila-and-tasting" id="toc-logistics-of-visiting-tequila-and-tasting" class="nav-link" data-scroll-target="#logistics-of-visiting-tequila-and-tasting">Logistics of Visiting Tequila and Tasting</a></li>
  <li><a href="#bringing-bottles-back-to-the-states" id="toc-bringing-bottles-back-to-the-states" class="nav-link" data-scroll-target="#bringing-bottles-back-to-the-states">Bringing Bottles Back to the States</a></li>
  <li><a href="#outline-of-our-trip-to-guadalajara-and-tequila" id="toc-outline-of-our-trip-to-guadalajara-and-tequila" class="nav-link" data-scroll-target="#outline-of-our-trip-to-guadalajara-and-tequila">Outline of Our Trip to Guadalajara and Tequila</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Visiting and Tasting in Tequila, Jalisco, Mexico</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="uncover-the-secrets-of-tequila-tasting-in-tequila-jalisco" class="level2">
<h2 class="anchored" data-anchor-id="uncover-the-secrets-of-tequila-tasting-in-tequila-jalisco">Uncover the Secrets of Tequila: Tasting in Tequila, Jalisco</h2>
<p>In early 2023, I went with my family to Tequila, Mexico for tequila tasting and sightseeing. I did a lot of research prior to going, mostly on Reddit and other individual blogs, and found they were of some help. I want to detail my experience so others can plan their trip. I can summarize my overall impression by saying, if you’re thinking about doing this, you should; it’s a great trip.</p>
<section id="travel-to-guadalajara" class="level3">
<h3 class="anchored" data-anchor-id="travel-to-guadalajara">Travel to Guadalajara</h3>
<p>We flew from Tijuana, Mexico to Guadalajara. My family lives in Southern California and it’s much cheaper to cross into Mexico and fly one of the Mexican domestic carriers than it is to fly from the U.S. For most people, this won’t be possible, but most major U.S. airlines fly to Guadalajara. The Guadalajara airport is nice and fairly large, and it was an easy trip from the airport into the city by taxi for about $20. We bought the taxi ride from a stand inside the airport, as you should always do in Mexico, rather than hailing a taxi from the curb. A few sources online suggested that Uber was not available at the Guadalajara airport, but when I signed on, there were a number of cars available. We used the taxi because the stand was right in the baggage claim area and it just seemed easier.</p>
<p>We were concerned about safety before we left, especially because a few days before the Mexican Government arrested the son of El Chapo, and <a href="https://www.reuters.com/world/americas/mexicos-culiacan-suffers-night-violence-with-gunfire-blockades-2023-01-05/">armed conflict broke out between the cartel and the government in Sinaloa</a>, especially in the city of Culiacan. That city is more than 400 miles from Guadalajara, and we never felt unsafe whatsoever during the day. At night we were advised not to walk around our neighborhood, Colonia Americana, so we didn’t venture farther than about four blocks from the hotel in the evening. One night we had dinner at <a href="https://alcalde.com.mx/">Alcalde</a>, which was pricey but fantastic, and took an Uber there and back even though it was only about one mile each way, within walking distance for us.</p>
<p>Guadalajara is an interesting and lively city, and it is worth staying a night or two there before heading to Tequila. We stayed three nights and that was probably one night too many. We had plans to see a rodeo, but all sporting events and some other public activities were canceled because of the violence. This was a one-off, unusual event, and not something that happens regularly. All the standard attractions in Guadalajara listed on other travel guides are worth visiting, so I won’t go into details about those here.</p>
</section>
<section id="from-guadalajara-to-tequila" class="level3">
<h3 class="anchored" data-anchor-id="from-guadalajara-to-tequila">From Guadalajara to Tequila</h3>
<p>As far as I can tell, the vast majority of American tourists end up day-tripping from Guadalajara to Tequila. I think this is a mistake, as I really liked spending two nights in the town itself. The famous Jose Cuervo Tequila Train only runs on weekends, so we weren’t able to do that. From what I could gather, the train takes people into the town, lets them visit the Cuervo factory, walk around town, then takes them back to Guadalajara. I much preferred having some time to spend in the town itself.</p>
<p>We took an Uber from near the center of Guadalajara to Tequila. It took about an hour and fifteen minutes, and cost us $60. Getting back from Tequila to Guadalajara is trickier because there are not a lot of Ubers in Tequila. We ended up hiring a driver through our guide, which cost us $100. There are two other options: hire a taxi in Tequila to Guadalajara, if possible. There are taxis in town, but I’m not sure they’d be willing to drive all the way back or how much it would cost. The other option is the <a href="https://www.tequilaplus.com/">bus</a> which goes from the Tequila bus station, close to the main tourist part of town, and stops at various stations in Guadalajara. The bus leaves every half hour or so all day, and costs only about $10 per person. This was our plan if we were unable to hire a car. The drawback of the bus is that it is slower than a car, and it ends at the central bus station from which you’d have to take an Uber or taxi to your hotel. Also be forewarned: there is often heavy traffic leaving and returning to Guadalajara.</p>
</section>
<section id="activities-and-scenery-in-tequila" class="level3">
<h3 class="anchored" data-anchor-id="activities-and-scenery-in-tequila">Activities and Scenery In Tequila</h3>
<p><img src="other_pics/town.JPG" class="img-fluid"> The town of Tequila, near the main square.</p>
<p>The town of Tequila is small and walkable, and felt completely safe. There seemed to be a lot of Mexican tourists drinking and taking tours in buses shaped like tequila barrels, but not many Americans. While there aren’t a ton of sights in the town per se, it’s just a nice place to walk around, hang out, and kill some time. There are distilleries/factories near the downtown area, and a ton of bars and shops; it’s kind of like a tamer version of walking the Vegas strip. If you want to go from shop to shop and bar to bar tasting tequila on the street, you’re in luck. <a href="https://en.wikipedia.org/wiki/Cantarito">Cantarito</a> is the mixed drink of the moment, and seems to be quite popular among the locals and tourists. It’s made with tequila, citrus juice, and Squirt, and served in a clay cup. I prefer my tequila neat so tasting one cantarito was enough for me.</p>
<p><img src="other_pics/house_tequila.JPG" class="img-fluid"> “House” tequila in plastic jugs piling up in a bar.</p>
<p>There are a few tequila distilleries/factories in town, and we chose the Sauza tour for no other reason than it came recommended on Reddit. Orendain, Cuervo, and potentially others are possibilities. And again, each bar seems to have its own “house” tequila that you can taste. The Sauza tour was fine and we got free tequila drinks at the end. We made a reservation but some of them (maybe Orendain?) don’t require reservations. Cuervo is obviously the biggest operation and has a small village in Tequila that multiple people referred to as similar to Disneyland.</p>
<p><img src="other_pics/mural.JPG" class="img-fluid"> Mural at Sauza celebrating Tequila.</p>
</section>
<section id="visiting-distilleries-outside-town" class="level3">
<h3 class="anchored" data-anchor-id="visiting-distilleries-outside-town">Visiting Distilleries Outside Town</h3>
<p>My image of doing a “tasting” comes from wine tasting in California. I wanted to get outside of town, see the fields, and visit some smaller distilleries. It turns out, this isn’t really possible. The model is not the same as it is for American wineries. First, every distillery one is able to visit has an attached tour with a tasting, and in fact, you’re paying for the tour. Of course, after the first tour or two, you probably don’t need to do another one. But, the model in Mexico seems to be that the tasting is secondary to the tour. It’s as if when wine tasting in Santa Barbara, each winery had a tour of its production facilities then at the end allowed you to taste some of its wine. By the time we got to our last distillery, Tres Mujeres, we skipped the tour and went straight to the tasting. This may not be possible at all of the distilleries, however. We tried this at Cascahuin, our third distillery, and the employees basically insisted we take the tour. To be fair, every distillery has a slightly different production process, and the tour at Cascahuin was different enough from our previous tours that we still enjoyed it.</p>
<p>The distilleries themselves are not scattered around the countryside, like most wineries, but are instead production facilities in the towns or on highways near Tequila. The agave is shipped in from the fields to the facility, not made onsite like in classic American vineyard and winery. As a result, you’re basically driving into small towns to get to a storefront with a factory behind it. This model is fine, it’s just not how I conceive of “going tasting”.</p>
<p>Just like with wineries, there was variation in the price and quantity of tequila you are able to drink, and this also likely varies with your guide. We hired a guide to pick us up in Tequila, drive us to three distilleries, and drive us back to our AirBnb in Tequila, with a lunch stop along the way. This is probably the way to do it, and there are a ton of guide services listed online. They are all relatively expensive however, and I’m not sure it is possible to book something cheaper, for Americans anyway. Most of the guide services I saw only cost roughly $120 per person, though you can reduce individual costs with more people. I liked our guide a lot so please <a href="mailto:doctordryfly@gmail.com">contact me</a> for his information.</p>
<p><img src="other_pics/ovens.JPG" class="img-fluid"> The piñas and ovens at Cascahuin.</p>
<p>We visited Cava del Oro, Cascahuin, and Tres Mujeres. Cascahuin seemed like the smallest and most artisanal of the three, but the other members of my group liked the tequila from Cava del Oro the best. They also had the most generous tasting experience, offering basically unlimited tastes of something like five tequilas and two mezcals. Tres Mujeres was a bit disappointing in that they only had two tequilas to taste. It was also obviously the biggest operation we visited, and while they had Instagram-ready views of the tequila fields and the cellars, it felt the most corporate and touristy of the three.</p>
</section>
<section id="logistics-of-visiting-tequila-and-tasting" class="level3">
<h3 class="anchored" data-anchor-id="logistics-of-visiting-tequila-and-tasting">Logistics of Visiting Tequila and Tasting</h3>
<p>Is it possible to do tequila tasting outside the town without a guide? I don’t think so, for the following reasons. If you want to get out of the town of Tequila, you need someone to drive you. There are no Ubers available in Tequila, though there are a lot of taxis. You could hire a taxi to drive you to one distillery, but then how would you get from that distillery to another distillery or back to Tequila? I suppose you could pay the taxi to wait, but at that point you’ve basically just hired a guide. Further, it’s clear the distilleries have relationships with guides. Some of them require reservations, which your guide should make for you, and others seemed to have bureaucratic requirements that seemed to require a guide to do the tour and tasting. For example, at two of the three distilleries we went to, our guide gave us the tour and tasting, not an employee of the distillery. If you don’t have a guide, I’m not sure they will even allow you to do a tour and tasting. Each of the tours and tastings cost a nominal fee, something like $10 per person, or less.</p>
<p>We specifically asked our guide to take us to smaller, lesser-known tequila distilleries. In retrospect, it’s not clear there is any such thing. It is exceedingly difficult to determine which distilleries are open to the public using the internet. And, the same distilleries make a lot of different brands of tequila so even if you think you’re going to the distillery for a particular small-batch tequila, it’s likely it’s made by a bigger manufacturer. It seems that there are something like six or seven distilleries everyone goes to, and many of the smaller operations may not even be open for tasting.</p>
<p>We bought at least one bottle from each of the distilleries. Interestingly, every tequila or mezcal we tasted or saw for sale is available from stores in the U.S., based on google searches of the brand. This was surprising to me, but it actually makes sense–fancy tequila is mostly being sold in the U.S., not in Mexico. Though it is disappointing that we weren’t able to find an underground, unheard of tequila brand, the bottles from the distillery were anywhere from 30% to 50% cheaper than they are in U.S. stores.</p>
<p>As we were driving through the towns, distilleries were going up everywhere. It’s clear the region expects an influx of tourists in the next few years, and everyone is trying to cash in. Get to Tequila soon before it is overrun with American tourists.</p>
<p><img src="other_pics/blue_agave.JPG" class="img-fluid"> Tres Mujeres had the only views of blue agave fields from a distillery.</p>
</section>
<section id="bringing-bottles-back-to-the-states" class="level3">
<h3 class="anchored" data-anchor-id="bringing-bottles-back-to-the-states">Bringing Bottles Back to the States</h3>
<p>The rules about bringing liquor back into the U.S. are complicated, apparently, and we got stopped at the border after trying to declare our nine bottles. Keep in mind, we took the bridge from the Tijuana airport into San Diego, and the rules are different from those driving across or flying into the U.S. Ultimately, the customs agent told us not to do it again and let us through with our tequila. I wish I could offer advice on how much you’re allowed to bring back, but I am completely confused about what’s allowed and what’s not. I spoke to a friend later who tried to bring back whiskey from Canada and was also subjected to confusing rules. He was told at the border that it depends on the agent’s discretion. I guess it’s too much to ask the U.S. Government to develop and post clear guidelines about bringing alcohol back through various crossings.</p>
</section>
<section id="outline-of-our-trip-to-guadalajara-and-tequila" class="level3">
<h3 class="anchored" data-anchor-id="outline-of-our-trip-to-guadalajara-and-tequila">Outline of Our Trip to Guadalajara and Tequila</h3>
<ul>
<li><p>Three nights in Guadalajara</p>
<ul>
<li>Stayed at <a href="https://rame.com.mx/">Rame Hotel Boutique</a></li>
</ul></li>
<li><p>Two nights in Tequila</p>
<ul>
<li>Stayed at AirBnb</li>
</ul></li>
<li><p>One night in Tlaquepaque, a suburb of Guadalajara</p>
<ul>
<li>Stayed at <a href="https://hotelvilladelensueno.com/">La Villa del Ensueno</a></li>
</ul></li>
<li><p>Distilleries visited</p>
<ul>
<li><p>Casa Sauza, in downtown Tequila</p></li>
<li><p>Cava del Oro, outside Tequila</p></li>
<li><p>Cascahuin, in Arenal outside Tequila</p></li>
<li><p>Tres Mujeres, outside Tequila</p></li>
</ul></li>
</ul>
<p>As I noted above, if one wanted to do this trip in fewer nights, one could do one or two nights in Guadalajara on the front end, two nights in Tequila, then straight back to the airport, or one night back in Guadalajara. I think two nights in Tequila is optimal because that gives you one day to arrive, walk around town and drink tequila, then another day to visit distilleries outside of town, leaving the next day. Everyone in my groups speaks decent Spanish, and we did one tour in Spanish (at Sauza), but it’s easy to find English-speaking guides. Almost everyone we encountered in the service industry in both Tequila and Guadalajara spoke some English.</p>
<p><a href="./index.html">Back to Main Page</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>